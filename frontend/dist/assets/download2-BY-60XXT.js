import{c as r}from"./zip-stream-CQr6YNqM.js";async function s(e,t){try{const o=c(e.name)||"application/octet-stream",i=a(e.name)||a(t)||"",p=await(await window.showSaveFilePicker({suggestedName:t,types:[{description:"File",accept:{[o]:[i?`.${i}`:""]}}]})).createWritable({keepExistingData:!1});await e.stream().pipeTo(p),console.log(`文件 ${t} 已成功保存`)}catch(o){throw console.error("保存文件时出错:",o),new Error(`保存文件 ${t} 失败: ${o.message}`)}}async function d(e,t){try{if(e.length===0)throw new Error("没有可下载的文件");if(e.length===1)return s(e[0],t);t.toLowerCase().endsWith(".zip")||(t+=".zip");const i=await(await window.showSaveFilePicker({suggestedName:t,types:[{description:"ZIP Archive",accept:{"application/zip":[".zip"]}}]})).createWritable();await(await r(e)).pipeTo(i),console.log(`ZIP文件 ${t} 已成功保存`)}catch(o){throw console.error("保存ZIP文件时出错:",o),new Error(`保存ZIP文件 ${t} 失败: ${o.message}`)}}function a(e){if(!e)return null;const t=e.match(/\.([^.]+)$/);return t?t[1].toLowerCase():null}function c(e){const t=a(e);return t&&{txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",pdf:"application/pdf",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",mp3:"audio/mpeg",mp4:"video/mp4",zip:"application/zip",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}[t]||null}export{d as streamDownloadMultipleFiles,s as streamDownloadSingleFile};
